(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[882],{85478:function(e,t,s){Promise.resolve().then(s.bind(s,9190))},9190:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return p}});var r=s(57437),n=s(2265),a=s(32660),i=s(48736),l=s(31047),d=s(89345),c=s(44743),o=s(27648),u=s(93303),m=s(70967),h=s(2085),x=s(65696),y=s(86035);function p(){let[e,t]=(0,n.useState)(!1),[s,p]=(0,n.useState)(!1),[g,f]=(0,n.useState)(null),[b,j]=(0,n.useState)(()=>{let e=(0,m.t)(new Date,1);return(0,h.WU)((0,x.z)(e,{weekStartsOn:1}),"yyyy-MM-dd")}),v=async()=>{try{t(!0),f(null),p(!1);let e=new Date(b),s=(0,y.v)(e,{weekStartsOn:1});await (0,u.i)("send-reminder",{weekStart:(0,h.WU)(e,"yyyy-MM-dd"),weekEnd:(0,h.WU)(s,"yyyy-MM-dd")}),p(!0),setTimeout(()=>p(!1),5e3)}catch(e){f(e instanceof Error?e.message:"Failed to send reports")}finally{t(!1)}};return(0,r.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,r.jsx)("header",{className:"bg-white shadow-sm border-b border-gray-200",children:(0,r.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[(0,r.jsx)(o.default,{href:"/",className:"text-gray-600 hover:text-gray-900",children:(0,r.jsx)(a.Z,{className:"w-6 h-6"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Weekly Reports"}),(0,r.jsx)("p",{className:"text-sm text-gray-600",children:"Generate and send time reports to clients"})]})]})})}),(0,r.jsxs)("main",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,r.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-8",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3 mb-6",children:[(0,r.jsx)("div",{className:"w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center",children:(0,r.jsx)(i.Z,{className:"w-6 h-6 text-green-600"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"Send Weekly Time Reports"}),(0,r.jsx)("p",{className:"text-sm text-gray-600",children:"Email time summaries to all active clients"})]})]}),(0,r.jsxs)("div",{className:"mb-6 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[(0,r.jsx)("h3",{className:"font-semibold text-blue-900 mb-2",children:"What gets sent:"}),(0,r.jsxs)("ul",{className:"text-sm text-blue-800 space-y-1 list-disc list-inside",children:[(0,r.jsx)("li",{children:"Total hours worked for each customer during the selected week"}),(0,r.jsx)("li",{children:"Breakdown by employee and service type"}),(0,r.jsx)("li",{children:"Date range and billing period information"}),(0,r.jsx)("li",{children:"Sent via Microsoft Graph API using your Outlook account"})]})]}),(0,r.jsxs)("div",{className:"mb-6",children:[(0,r.jsx)("label",{htmlFor:"weekSelect",className:"block text-sm font-medium text-gray-700 mb-2",children:"Select Week to Report"}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)(l.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),(0,r.jsx)("input",{type:"date",id:"weekSelect",value:b,onChange:e=>j(e.target.value),className:"pl-10 w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,r.jsxs)("p",{className:"mt-2 text-sm text-gray-500",children:["Week: ",(0,h.WU)(new Date(b),"MMM dd")," - ",(0,h.WU)((0,y.v)(new Date(b),{weekStartsOn:1}),"MMM dd, yyyy")]})]}),g&&(0,r.jsx)("div",{className:"mb-6 bg-red-50 border border-red-200 rounded-lg p-4",children:(0,r.jsx)("p",{className:"text-red-800",children:g})}),s&&(0,r.jsx)("div",{className:"mb-6 bg-green-50 border border-green-200 rounded-lg p-4",children:(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(d.Z,{className:"w-5 h-5 text-green-600"}),(0,r.jsx)("p",{className:"text-green-800 font-medium",children:"Weekly reports sent successfully!"})]})}),(0,r.jsx)("button",{onClick:v,disabled:e,className:"w-full flex items-center justify-center gap-2 px-6 py-3 bg-gradient-to-r from-green-500 to-green-600 text-white rounded-lg font-semibold hover:from-green-600 hover:to-green-700 transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed",children:e?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"spinner w-5 h-5 border-2"}),"Sending reports..."]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(c.Z,{className:"w-5 h-5"}),"Send Weekly Reports"]})}),(0,r.jsxs)("div",{className:"mt-6 p-4 bg-gray-50 rounded-lg",children:[(0,r.jsx)("h3",{className:"text-sm font-semibold text-gray-900 mb-2",children:"Report Details:"}),(0,r.jsxs)("ul",{className:"text-sm text-gray-600 space-y-1",children:[(0,r.jsx)("li",{children:"• Emails are sent to customer email addresses in QuickBooks"}),(0,r.jsx)("li",{children:"• Reports include only billable time entries"}),(0,r.jsx)("li",{children:"• Customers with zero hours are skipped"}),(0,r.jsx)("li",{children:"• Email logs are stored for 1 year"})]})]})]}),(0,r.jsxs)("div",{className:"mt-8 bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Recent Report Activity"}),(0,r.jsx)("p",{className:"text-sm text-gray-500 text-center py-8",children:"Activity log coming soon..."})]})]})]})}},93303:function(e,t,s){"use strict";s.d(t,{O:function(){return i},i:function(){return l}});var r=s(13053);let n="https://migcpasmtbdojqphqyzc.supabase.co",a="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im1pZ2NwYXNtdGJkb2pxcGhxeXpjIiwicm9sZSI6ImFub24iLCJpYXQiOjE3Njk2OTk3MjYsImV4cCI6MjA4NTI3NTcyNn0.90w8O2oX76uPTuFp092jTCZoL95lJ7YnaOPMGcRP2fQ",i=(0,r.eI)(n,a);async function l(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"POST",r="".concat(n,"/functions/v1/").concat(e),i=await fetch(r,{method:s,headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(a)},body:t?JSON.stringify(t):void 0});if(!i.ok){let e=await i.text();throw Error("Edge Function error: ".concat(e))}return i.json()}},32660:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(39763).Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},31047:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(39763).Z)("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]])},48736:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(39763).Z)("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]])},89345:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(39763).Z)("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]])},44743:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(39763).Z)("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]])},59121:function(e,t,s){"use strict";s.d(t,{E:function(){return a}});var r=s(99649),n=s(63497);function a(e,t){let s=(0,r.Q)(e);return isNaN(t)?(0,n.L)(e,NaN):(t&&s.setDate(s.getDate()+t),s)}},86035:function(e,t,s){"use strict";s.d(t,{v:function(){return a}});var r=s(99649),n=s(55528);function a(e,t){var s,a,i,l,d,c,o,u;let m=(0,n.j)(),h=null!==(u=null!==(o=null!==(c=null!==(d=null==t?void 0:t.weekStartsOn)&&void 0!==d?d:null==t?void 0:null===(a=t.locale)||void 0===a?void 0:null===(s=a.options)||void 0===s?void 0:s.weekStartsOn)&&void 0!==c?c:m.weekStartsOn)&&void 0!==o?o:null===(l=m.locale)||void 0===l?void 0:null===(i=l.options)||void 0===i?void 0:i.weekStartsOn)&&void 0!==u?u:0,x=(0,r.Q)(e),y=x.getDay();return x.setDate(x.getDate()+((y<h?-7:0)+6-(y-h))),x.setHours(23,59,59,999),x}},70967:function(e,t,s){"use strict";s.d(t,{t:function(){return n}});var r=s(59121);function n(e,t){var s;return s=-t,(0,r.E)(e,7*s)}}},function(e){e.O(0,[641,85,971,117,744],function(){return e(e.s=85478)}),_N_E=e.O()}]);