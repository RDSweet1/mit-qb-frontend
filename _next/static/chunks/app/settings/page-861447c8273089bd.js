(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[938],{35176:function(e,s,t){Promise.resolve().then(t.bind(t,94212))},94212:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return g}});var n=t(57437),a=t(2265),c=t(32660),r=t(39763);let i=(0,r.Z)("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);var l=t(82431);let d=(0,r.Z)("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);var o=t(31047),x=t(89345),m=t(27648),h=t(93303);function g(){let[e,s]=(0,a.useState)("unknown"),[t,r]=(0,a.useState)(!0),[g,u]=(0,a.useState)(null);(0,a.useEffect)(()=>{y()},[]);let y=async()=>{try{r(!0);let{data:e,error:t}=await h.O.from("qb_tokens").select("access_token, expires_at").single();t||!e?s("disconnected"):new Date(e.expires_at)>new Date?s("connected"):s("disconnected");let{data:n}=await h.O.from("time_entries").select("created_at").order("created_at",{ascending:!1}).limit(1).single();n&&u(n.created_at)}catch(e){console.error("Error checking QB connection:",e),s("unknown")}finally{r(!1)}};return(0,n.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,n.jsx)("header",{className:"bg-white shadow-sm border-b border-gray-200",children:(0,n.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:(0,n.jsxs)("div",{className:"flex items-center gap-4",children:[(0,n.jsx)(m.default,{href:"/",className:"text-gray-600 hover:text-gray-900",children:(0,n.jsx)(c.Z,{className:"w-6 h-6"})}),(0,n.jsxs)("div",{children:[(0,n.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Settings"}),(0,n.jsx)("p",{className:"text-sm text-gray-600",children:"Configure integrations and automation"})]})]})})}),(0,n.jsxs)("main",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,n.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 mb-6",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,n.jsxs)("div",{className:"flex items-center gap-3",children:[(0,n.jsx)("div",{className:"w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center",children:(0,n.jsx)(i,{className:"w-6 h-6 text-green-600"})}),(0,n.jsxs)("div",{children:[(0,n.jsx)("h2",{className:"text-lg font-semibold text-gray-900",children:"QuickBooks Connection"}),(0,n.jsx)("p",{className:"text-sm text-gray-600",children:"Manage QuickBooks Online integration"})]})]}),(0,n.jsx)("button",{onClick:y,disabled:t,className:"p-2 text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",title:"Refresh connection status",children:(0,n.jsx)(l.Z,{className:"w-5 h-5 ".concat(t?"animate-spin":"")})})]}),(0,n.jsxs)("div",{className:"space-y-4",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("p",{className:"text-sm font-medium text-gray-900",children:"Connection Status"}),(0,n.jsx)("p",{className:"text-xs text-gray-500",children:"OAuth 2.0 authentication"})]}),(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)("div",{className:"w-3 h-3 rounded-full ".concat("connected"===e?"bg-green-500":"disconnected"===e?"bg-red-500":"bg-gray-400")}),(0,n.jsx)("span",{className:"text-sm font-semibold ".concat("connected"===e?"text-green-600":"disconnected"===e?"text-red-600":"text-gray-600"),children:"connected"===e?"Connected":"disconnected"===e?"Disconnected":"Checking..."})]})]}),g&&(0,n.jsxs)("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("p",{className:"text-sm font-medium text-gray-900",children:"Last Sync"}),(0,n.jsx)("p",{className:"text-xs text-gray-500",children:"Most recent data update"})]}),(0,n.jsx)("span",{className:"text-sm text-gray-900",children:new Date(g).toLocaleString()})]}),"disconnected"===e&&(0,n.jsxs)("button",{onClick:()=>{window.open("https://migcpasmtbdojqphqyzc.supabase.co/functions/v1/connect-qb","QuickBooks OAuth","width=800,height=600")},className:"w-full flex items-center justify-center gap-2 px-6 py-3 bg-green-600 text-white rounded-lg font-semibold hover:bg-green-700 transition-colors",children:[(0,n.jsx)(i,{className:"w-5 h-5"}),"Connect to QuickBooks"]}),"connected"===e&&(0,n.jsx)("div",{className:"p-4 bg-green-50 border border-green-200 rounded-lg",children:(0,n.jsx)("p",{className:"text-sm text-green-800",children:"✓ Successfully connected to QuickBooks Online. You can now sync time entries and create invoices."})})]})]}),(0,n.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 mb-6",children:[(0,n.jsxs)("div",{className:"flex items-center gap-3 mb-6",children:[(0,n.jsx)("div",{className:"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center",children:(0,n.jsx)(d,{className:"w-6 h-6 text-blue-600"})}),(0,n.jsxs)("div",{children:[(0,n.jsx)("h2",{className:"text-lg font-semibold text-gray-900",children:"Database"}),(0,n.jsx)("p",{className:"text-sm text-gray-600",children:"Supabase PostgreSQL"})]})]}),(0,n.jsxs)("div",{className:"space-y-3",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[(0,n.jsx)("span",{className:"text-sm font-medium text-gray-900",children:"Database Region"}),(0,n.jsx)("span",{className:"text-sm text-gray-600",children:"US-East-1 (Virginia)"})]}),(0,n.jsxs)("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[(0,n.jsx)("span",{className:"text-sm font-medium text-gray-900",children:"Row-Level Security"}),(0,n.jsx)("span",{className:"text-sm text-green-600",children:"✓ Enabled"})]}),(0,n.jsxs)("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[(0,n.jsx)("span",{className:"text-sm font-medium text-gray-900",children:"Encryption"}),(0,n.jsx)("span",{className:"text-sm text-green-600",children:"✓ TLS 1.3"})]})]})]}),(0,n.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 mb-6",children:[(0,n.jsxs)("div",{className:"flex items-center gap-3 mb-6",children:[(0,n.jsx)("div",{className:"w-12 h-12 bg-purple-100 rounded-lg flex items-center justify-center",children:(0,n.jsx)(o.Z,{className:"w-6 h-6 text-purple-600"})}),(0,n.jsxs)("div",{children:[(0,n.jsx)("h2",{className:"text-lg font-semibold text-gray-900",children:"Automation"}),(0,n.jsx)("p",{className:"text-sm text-gray-600",children:"Scheduled tasks and cron jobs"})]})]}),(0,n.jsxs)("div",{className:"space-y-3",children:[(0,n.jsxs)("div",{className:"p-4 bg-gray-50 rounded-lg",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,n.jsx)("span",{className:"text-sm font-medium text-gray-900",children:"Weekly Reports"}),(0,n.jsx)("span",{className:"text-xs text-gray-500",children:"Mondays @ 9 AM"})]}),(0,n.jsx)("p",{className:"text-xs text-gray-600",children:"Automatically sends weekly time reports to customers every Monday morning"})]}),(0,n.jsxs)("div",{className:"p-4 bg-gray-50 rounded-lg",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,n.jsx)("span",{className:"text-sm font-medium text-gray-900",children:"Monthly Invoices"}),(0,n.jsx)("span",{className:"text-xs text-gray-500",children:"1st of month @ 10 AM"})]}),(0,n.jsx)("p",{className:"text-xs text-gray-600",children:"Creates monthly invoices in QuickBooks on the first day of each month"})]}),(0,n.jsxs)("div",{className:"p-4 bg-gray-50 rounded-lg",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,n.jsx)("span",{className:"text-sm font-medium text-gray-900",children:"Time Sync"}),(0,n.jsx)("span",{className:"text-xs text-gray-500",children:"Daily @ 8 AM"})]}),(0,n.jsx)("p",{className:"text-xs text-gray-600",children:"Syncs time entries from QuickBooks Workforce daily"})]})]}),(0,n.jsx)("div",{className:"mt-4 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:(0,n.jsxs)("p",{className:"text-xs text-blue-800",children:[(0,n.jsx)("strong",{children:"Note:"})," Automation is configured via Supabase Edge Functions and PostgreSQL cron jobs. Contact your administrator to modify schedules."]})})]}),(0,n.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[(0,n.jsxs)("div",{className:"flex items-center gap-3 mb-6",children:[(0,n.jsx)("div",{className:"w-12 h-12 bg-orange-100 rounded-lg flex items-center justify-center",children:(0,n.jsx)(x.Z,{className:"w-6 h-6 text-orange-600"})}),(0,n.jsxs)("div",{children:[(0,n.jsx)("h2",{className:"text-lg font-semibold text-gray-900",children:"Email Delivery"}),(0,n.jsx)("p",{className:"text-sm text-gray-600",children:"Microsoft Graph API"})]})]}),(0,n.jsxs)("div",{className:"space-y-3",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[(0,n.jsx)("span",{className:"text-sm font-medium text-gray-900",children:"Service"}),(0,n.jsx)("span",{className:"text-sm text-gray-600",children:"Outlook / Microsoft 365"})]}),(0,n.jsxs)("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[(0,n.jsx)("span",{className:"text-sm font-medium text-gray-900",children:"Authentication"}),(0,n.jsx)("span",{className:"text-sm text-green-600",children:"✓ Azure AD"})]}),(0,n.jsxs)("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[(0,n.jsx)("span",{className:"text-sm font-medium text-gray-900",children:"From Address"}),(0,n.jsx)("span",{className:"text-sm text-gray-600",children:"accounting@mitigationconsulting.com"})]})]})]})]})]})}},93303:function(e,s,t){"use strict";t.d(s,{O:function(){return r},i:function(){return i}});var n=t(13053);let a="https://migcpasmtbdojqphqyzc.supabase.co",c="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im1pZ2NwYXNtdGJkb2pxcGhxeXpjIiwicm9sZSI6ImFub24iLCJpYXQiOjE3Njk2OTk3MjYsImV4cCI6MjA4NTI3NTcyNn0.90w8O2oX76uPTuFp092jTCZoL95lJ7YnaOPMGcRP2fQ",r=(0,n.eI)(a,c);async function i(e,s){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"POST",n="".concat(a,"/functions/v1/").concat(e),r=await fetch(n,{method:t,headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(c)},body:s?JSON.stringify(s):void 0});if(!r.ok){let e=await r.text();throw Error("Edge Function error: ".concat(e))}return r.json()}},32660:function(e,s,t){"use strict";t.d(s,{Z:function(){return n}});let n=(0,t(39763).Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},31047:function(e,s,t){"use strict";t.d(s,{Z:function(){return n}});let n=(0,t(39763).Z)("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]])},89345:function(e,s,t){"use strict";t.d(s,{Z:function(){return n}});let n=(0,t(39763).Z)("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]])},82431:function(e,s,t){"use strict";t.d(s,{Z:function(){return n}});let n=(0,t(39763).Z)("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]])}},function(e){e.O(0,[641,971,117,744],function(){return e(e.s=35176)}),_N_E=e.O()}]);