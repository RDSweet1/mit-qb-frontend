(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{57454:function(e,s,t){Promise.resolve().then(t.bind(t,16473))},16473:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return U}});var r=t(57437),a=t(18112),l=t(34847),n=t(2265),i=t(91723),o=t(29090),d=t(48736),c=t(95252),u=t(98728),h=t(95805),m=t(27648),x=t(93303),g=t(65696),b=t(63070);function j(){let[e,s]=(0,n.useState)(null),[t,a]=(0,n.useState)(!0),[l,i]=(0,n.useState)(null);(0,n.useEffect)(()=>{o()},[]);let o=async()=>{try{a(!0),i(null);let[e,t,r,l]=await Promise.all([d(),c(),u(),h()]);s({qbConnected:e,lastSync:t,pendingReports:r,monthHours:l})}catch(e){console.error("Error loading stats:",e),i("Failed to load dashboard stats")}finally{a(!1)}},d=async()=>{try{let{data:e,error:s}=await x.O.from("qb_tokens").select("expires_at").single();if(s||!e)return!1;return new Date(e.expires_at)>new Date}catch(e){return!1}},c=async()=>{try{let{data:e,error:s}=await x.O.from("time_entries").select("synced_at").not("synced_at","is",null).order("synced_at",{ascending:!1}).limit(1).single();if(s||!e)return null;return e.synced_at}catch(e){return null}},u=async()=>{try{let e=(0,g.z)(new Date,{weekStartsOn:1}).toISOString().split("T")[0],{data:s,error:t}=await x.O.from("time_entries").select("qb_customer_id").gte("txn_date",e).eq("billable_status","Billable");if(t||!s)return 0;return new Set(s.map(e=>e.qb_customer_id)).size}catch(e){return 0}},h=async()=>{try{let e=(0,b.N)(new Date).toISOString().split("T")[0],{data:s,error:t}=await x.O.from("time_entries").select("hours, minutes").gte("txn_date",e);if(t||!s)return 0;let r=s.reduce((e,s)=>e+(s.hours||0)+(s.minutes||0)/60,0);return Math.round(100*r)/100}catch(e){return 0}};return t?(0,r.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[1,2,3,4].map(e=>(0,r.jsxs)("div",{className:"bg-white p-4 rounded-lg shadow-sm border border-gray-200 animate-pulse",children:[(0,r.jsx)("div",{className:"h-4 bg-gray-200 rounded w-1/2 mb-2"}),(0,r.jsx)("div",{className:"h-8 bg-gray-200 rounded w-3/4"})]},e))}):l?(0,r.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 text-red-800",children:l}):e?(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,r.jsxs)("div",{className:"bg-white p-4 rounded-lg shadow-sm border border-gray-200",children:[(0,r.jsx)("p",{className:"text-sm text-gray-600 mb-1",children:"QuickBooks Status"}),(0,r.jsx)("p",{className:"text-2xl font-bold ".concat(e.qbConnected?"text-green-600":"text-red-600"),children:e.qbConnected?"Connected":"Disconnected"})]}),(0,r.jsxs)("div",{className:"bg-white p-4 rounded-lg shadow-sm border border-gray-200",children:[(0,r.jsx)("p",{className:"text-sm text-gray-600 mb-1",children:"Last Sync"}),(0,r.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:e.lastSync?function(e){let s="string"==typeof e?new Date(e):e;return new Intl.DateTimeFormat("en-US",{year:"numeric",month:"short",day:"numeric"}).format(s)}(e.lastSync):"--"})]}),(0,r.jsxs)("div",{className:"bg-white p-4 rounded-lg shadow-sm border border-gray-200",children:[(0,r.jsx)("p",{className:"text-sm text-gray-600 mb-1",children:"Pending Reports"}),(0,r.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:e.pendingReports})]}),(0,r.jsxs)("div",{className:"bg-white p-4 rounded-lg shadow-sm border border-gray-200",children:[(0,r.jsx)("p",{className:"text-sm text-gray-600 mb-1",children:"This Month"}),(0,r.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:function(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return"".concat((e+s/60).toFixed(2)," hrs")}(e.monthHours)})]})]}):null}var y=t(5341),p=t(2085),f=t(91436),v=t(77031),N=t(56940),w=t(97059),D=t(62994),_=t(77719),S=t(43922),E=t(86810),B=t(10062),k=t(20407),O=t(21156),I=t(55487);let M=["#3b82f6","#10b981","#f59e0b","#ef4444","#8b5cf6","#ec4899"];function T(){let[e,s]=(0,n.useState)([]),[t,a]=(0,n.useState)([]),[l,i]=(0,n.useState)([]),[o,d]=(0,n.useState)([]),[c,u]=(0,n.useState)(!0);(0,n.useEffect)(()=>{h()},[]);let h=async()=>{try{u(!0),await Promise.all([m(),g(),j(),T()])}catch(e){console.error("Error loading chart data:",e)}finally{u(!1)}},m=async()=>{try{let e=(0,b.N)(new Date).toISOString().split("T")[0],{data:t,error:r}=await x.O.from("time_entries").select("qb_customer_id, hours, minutes, customers(display_name)").gte("txn_date",e);if(r||!t){console.error("Error loading customer hours:",r);return}let a=t.reduce((e,s)=>{var t;let r=s.qb_customer_id,a=(null===(t=s.customers)||void 0===t?void 0:t.display_name)||r,l=(s.hours||0)+(s.minutes||0)/60;return e[r]||(e[r]={customer:a,hours:0}),e[r].hours+=l,e},{}),l=Object.values(a).sort((e,s)=>s.hours-e.hours).slice(0,5).map(e=>({customer:e.customer,hours:Math.round(100*e.hours)/100}));s(l)}catch(e){console.error("Error in loadCustomerHours:",e)}},g=async()=>{try{let e=(0,b.N)(new Date).toISOString().split("T")[0],{data:s,error:t}=await x.O.from("time_entries").select("billable_status, hours, minutes").gte("txn_date",e);if(t||!s)return;let r=s.filter(e=>"Billable"===e.billable_status).reduce((e,s)=>e+(s.hours||0)+(s.minutes||0)/60,0),l=s.filter(e=>"NotBillable"===e.billable_status).reduce((e,s)=>e+(s.hours||0)+(s.minutes||0)/60,0),n=r+l;n>0&&a([{name:"Billable",value:Math.round(100*r)/100,percentage:Math.round(r/n*100)},{name:"Non-Billable",value:Math.round(100*l)/100,percentage:Math.round(l/n*100)}])}catch(e){console.error("Error in loadBillableBreakdown:",e)}},j=async()=>{try{let e=(0,y.k)(new Date,30).toISOString().split("T")[0],{data:s,error:t}=await x.O.from("time_entries").select("txn_date, hours, minutes").gte("txn_date",e).order("txn_date",{ascending:!0});if(t||!s)return;let r=s.reduce((e,s)=>{let t=s.txn_date,r=(s.hours||0)+(s.minutes||0)/60;return e[t]||(e[t]=0),e[t]+=r,e},{}),a=Object.entries(r).map(e=>{let[s,t]=e;return{date:(0,p.WU)(new Date(s),"MMM dd"),hours:Math.round(100*t)/100}});i(a)}catch(e){console.error("Error in loadDailyTrend:",e)}},T=async()=>{try{let e=(0,b.N)(new Date).toISOString().split("T")[0],{data:s,error:t}=await x.O.from("time_entries").select("service_item_id, hours, minutes, service_items(name)").gte("txn_date",e);if(t||!s)return;let r=s.reduce((e,s)=>{var t;let r=s.service_item_id,a=(null===(t=s.service_items)||void 0===t?void 0:t.name)||r,l=(s.hours||0)+(s.minutes||0)/60;return e[r]||(e[r]={service:a,hours:0}),e[r].hours+=l,e},{}),a=Object.values(r).sort((e,s)=>s.hours-e.hours).slice(0,5).map(e=>({service:e.service,hours:Math.round(100*e.hours)/100}));d(a)}catch(e){console.error("Error in loadServiceBreakdown:",e)}};return c?(0,r.jsx)("div",{className:"mt-8 grid grid-cols-1 lg:grid-cols-2 gap-6",children:[1,2,3,4].map(e=>(0,r.jsxs)("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-200 animate-pulse",children:[(0,r.jsx)("div",{className:"h-6 bg-gray-200 rounded w-1/3 mb-4"}),(0,r.jsx)("div",{className:"h-64 bg-gray-100 rounded"})]},e))}):(0,r.jsxs)("div",{className:"mt-8",children:[(0,r.jsx)("h3",{className:"text-xl font-bold text-gray-900 mb-6",children:"Analytics"}),(0,r.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,r.jsxs)("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-200",children:[(0,r.jsx)("h4",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Top Customers (This Month)"}),e.length>0?(0,r.jsx)(f.h,{width:"100%",height:300,children:(0,r.jsxs)(v.v,{data:e,children:[(0,r.jsx)(N.q,{strokeDasharray:"3 3"}),(0,r.jsx)(w.K,{dataKey:"customer"}),(0,r.jsx)(D.B,{label:{value:"Hours",angle:-90,position:"insideLeft"}}),(0,r.jsx)(_.u,{}),(0,r.jsx)(S.$Q,{dataKey:"hours",fill:"#3b82f6"})]})}):(0,r.jsx)("div",{className:"h-64 flex items-center justify-center text-gray-500",children:"No data available"})]}),(0,r.jsxs)("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-200",children:[(0,r.jsx)("h4",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Billable vs Non-Billable"}),t.length>0?(0,r.jsx)(f.h,{width:"100%",height:300,children:(0,r.jsxs)(E.u,{children:[(0,r.jsx)(B.by,{data:t,cx:"50%",cy:"50%",labelLine:!1,label:e=>"".concat(e.name,": ").concat(e.percentage,"%"),outerRadius:100,fill:"#8884d8",dataKey:"value",children:t.map((e,s)=>(0,r.jsx)(k.b,{fill:M[s%M.length]},"cell-".concat(s)))}),(0,r.jsx)(_.u,{})]})}):(0,r.jsx)("div",{className:"h-64 flex items-center justify-center text-gray-500",children:"No data available"})]}),(0,r.jsxs)("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-200",children:[(0,r.jsx)("h4",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Daily Hours (Last 30 Days)"}),l.length>0?(0,r.jsx)(f.h,{width:"100%",height:300,children:(0,r.jsxs)(O.w,{data:l,children:[(0,r.jsx)(N.q,{strokeDasharray:"3 3"}),(0,r.jsx)(w.K,{dataKey:"date"}),(0,r.jsx)(D.B,{label:{value:"Hours",angle:-90,position:"insideLeft"}}),(0,r.jsx)(_.u,{}),(0,r.jsx)(I.x1,{type:"monotone",dataKey:"hours",stroke:"#10b981",strokeWidth:2})]})}):(0,r.jsx)("div",{className:"h-64 flex items-center justify-center text-gray-500",children:"No data available"})]}),(0,r.jsxs)("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-200",children:[(0,r.jsx)("h4",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Top Services (This Month)"}),o.length>0?(0,r.jsx)(f.h,{width:"100%",height:300,children:(0,r.jsxs)(v.v,{data:o,children:[(0,r.jsx)(N.q,{strokeDasharray:"3 3"}),(0,r.jsx)(w.K,{dataKey:"service"}),(0,r.jsx)(D.B,{label:{value:"Hours",angle:-90,position:"insideLeft"}}),(0,r.jsx)(_.u,{}),(0,r.jsx)(S.$Q,{dataKey:"hours",fill:"#8b5cf6"})]})}):(0,r.jsx)("div",{className:"h-64 flex items-center justify-center text-gray-500",children:"No data available"})]})]})]})}function U(){let{instance:e,accounts:s,inProgress:t}=(0,a.Fp)(),[x,g]=(0,n.useState)(!1),[b,y]=(0,n.useState)(!1),p=s.length>0,f=s[0];(0,n.useEffect)(()=>{e&&"none"===t&&y(!0)},[e,t]),(0,n.useEffect)(()=>{console.log("\uD83D\uDD0D DEBUG v2: Home component mounted/updated"),console.log("\uD83D\uDD0D DEBUG v2: Is authenticated:",p),console.log("\uD83D\uDD0D DEBUG v2: Accounts:",s),console.log("\uD83D\uDD0D DEBUG v2: User:",f),console.log("\uD83D\uDD0D DEBUG v2: Build timestamp:",new Date().toISOString())},[p,s,f]);let v=async()=>{console.log("\uD83D\uDD0D DEBUG: handleLogin called - button clicked!"),console.log("\uD83D\uDD0D DEBUG: MSAL instance:",e),console.log("\uD83D\uDD0D DEBUG: Current accounts:",s),console.log("\uD83D\uDD0D DEBUG: Login request:",l.Qb),g(!0);try{console.log("\uD83D\uDD0D DEBUG: Calling loginPopup...");let s=await e.loginPopup(l.Qb);console.log("✅ DEBUG: Login successful!",s)}catch(e){console.error("❌ DEBUG: Login failed with error:",e),console.error("❌ DEBUG: Error name:",null==e?void 0:e.name),console.error("❌ DEBUG: Error message:",null==e?void 0:e.message),console.error("❌ DEBUG: Error code:",null==e?void 0:e.errorCode),console.error("❌ DEBUG: Error description:",null==e?void 0:e.errorMessage),console.error("❌ DEBUG: Full error object:",JSON.stringify(e,null,2)),alert("Login Error:\n".concat((null==e?void 0:e.message)||e,"\n\nCheck console (F12) for details."))}finally{console.log("\uD83D\uDD0D DEBUG: Login attempt finished, setting loading to false"),g(!1)}};return b?p?(0,r.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,r.jsx)("header",{className:"bg-white shadow-sm border-b border-gray-200",children:(0,r.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,r.jsxs)("div",{className:"flex justify-between items-center py-4",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-lg flex items-center justify-center",children:(0,r.jsx)(i.Z,{className:"w-6 h-6 text-white"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-xl font-bold text-gray-900",children:"MIT Consulting"}),(0,r.jsx)("p",{className:"text-xs text-gray-500",children:"Timesheet & Billing"})]})]}),(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[(0,r.jsxs)("div",{className:"text-right",children:[(0,r.jsx)("p",{className:"text-sm font-medium text-gray-900",children:null==f?void 0:f.name}),(0,r.jsx)("p",{className:"text-xs text-gray-500",children:null==f?void 0:f.username})]}),(0,r.jsx)("button",{onClick:()=>{e.logoutPopup()},className:"px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 rounded-lg transition-colors",children:"Sign Out"})]})]})})}),(0,r.jsxs)("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,r.jsxs)("div",{className:"mb-8",children:[(0,r.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Dashboard"}),(0,r.jsx)("p",{className:"text-gray-600",children:"Manage timesheets, reports, and invoices"})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[(0,r.jsx)(m.default,{href:"/time-entries-enhanced",className:"group",children:(0,r.jsxs)("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-200 hover:shadow-md hover:border-blue-300 transition-all duration-200",children:[(0,r.jsx)("div",{className:"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center mb-4 group-hover:bg-blue-200 transition-colors",children:(0,r.jsx)(i.Z,{className:"w-6 h-6 text-blue-600"})}),(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Time Entries"}),(0,r.jsx)("p",{className:"text-sm text-gray-600",children:"View time entries with filters and generate weekly reports"})]})}),(0,r.jsx)(m.default,{href:"/reports",className:"group",children:(0,r.jsxs)("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-200 hover:shadow-md hover:border-green-300 transition-all duration-200",children:[(0,r.jsx)("div",{className:"w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center mb-4 group-hover:bg-green-200 transition-colors",children:(0,r.jsx)(d.Z,{className:"w-6 h-6 text-green-600"})}),(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Weekly Reports"}),(0,r.jsx)("p",{className:"text-sm text-gray-600",children:"Generate and send weekly time reports to clients"})]})}),(0,r.jsx)(m.default,{href:"/invoices",className:"group",children:(0,r.jsxs)("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-200 hover:shadow-md hover:border-purple-300 transition-all duration-200",children:[(0,r.jsx)("div",{className:"w-12 h-12 bg-purple-100 rounded-lg flex items-center justify-center mb-4 group-hover:bg-purple-200 transition-colors",children:(0,r.jsx)(c.Z,{className:"w-6 h-6 text-purple-600"})}),(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Invoices"}),(0,r.jsx)("p",{className:"text-sm text-gray-600",children:"Create monthly invoices in QuickBooks Online"})]})}),(0,r.jsx)(m.default,{href:"/settings",className:"group",children:(0,r.jsxs)("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-200 hover:shadow-md hover:border-gray-300 transition-all duration-200",children:[(0,r.jsx)("div",{className:"w-12 h-12 bg-gray-100 rounded-lg flex items-center justify-center mb-4 group-hover:bg-gray-200 transition-colors",children:(0,r.jsx)(u.Z,{className:"w-6 h-6 text-gray-600"})}),(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Settings"}),(0,r.jsx)("p",{className:"text-sm text-gray-600",children:"Configure QuickBooks connection and automation"})]})}),(0,r.jsx)(m.default,{href:"/admin/users",className:"group",children:(0,r.jsxs)("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-200 hover:shadow-md hover:border-indigo-300 transition-all duration-200",children:[(0,r.jsx)("div",{className:"w-12 h-12 bg-indigo-100 rounded-lg flex items-center justify-center mb-4 group-hover:bg-indigo-200 transition-colors",children:(0,r.jsx)(h.Z,{className:"w-6 h-6 text-indigo-600"})}),(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"User Management"}),(0,r.jsx)("p",{className:"text-sm text-gray-600",children:"Manage users, roles, and permissions"})]})})]}),(0,r.jsx)("div",{className:"mt-8",children:(0,r.jsx)(j,{})}),(0,r.jsx)(T,{})]})]}):(0,r.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 to-indigo-100",children:(0,r.jsxs)("div",{className:"bg-white p-8 rounded-2xl shadow-2xl max-w-md w-full",children:[(0,r.jsxs)("div",{className:"text-center mb-8",children:[(0,r.jsx)("div",{className:"w-20 h-20 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-xl mx-auto mb-4 flex items-center justify-center",children:(0,r.jsx)(i.Z,{className:"w-10 h-10 text-white"})}),(0,r.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"MIT Consulting"}),(0,r.jsx)("p",{className:"text-gray-600",children:"QuickBooks Timesheet System"})]}),(0,r.jsx)("div",{className:"mb-6 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:(0,r.jsxs)("p",{className:"text-sm text-blue-800",children:[(0,r.jsx)("strong",{children:"Internal Use Only:"})," This application is exclusively for MIT Consulting employees."]})}),(0,r.jsx)("button",{onClick:v,disabled:x,className:"w-full bg-gradient-to-r from-blue-500 to-indigo-600 text-white py-3 px-6 rounded-lg font-semibold hover:from-blue-600 hover:to-indigo-700 transition-all duration-200 flex items-center justify-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:x?(0,r.jsx)("div",{className:"spinner w-5 h-5 border-2"}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(o.Z,{className:"w-5 h-5"}),"Sign in with Microsoft"]})}),(0,r.jsx)("div",{className:"mt-6 pt-6 border-t border-gray-200",children:(0,r.jsxs)("p",{className:"text-xs text-gray-500 text-center",children:["By signing in, you agree to the"," ",(0,r.jsx)("a",{href:"/eula",className:"text-blue-600 hover:underline",children:"EULA & Privacy Policy"})]})})]})}):(0,r.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"inline-block animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"}),(0,r.jsx)("p",{className:"mt-4 text-gray-600",children:"Loading..."})]})})}},34847:function(e,s,t){"use strict";t.d(s,{Qb:function(){return a},XM:function(){return r}});let r={auth:{clientId:"973b689d-d96c-4445-883b-739fff12330b",authority:"https://login.microsoftonline.com/".concat("aee0257d-3be3-45ae-806b-65c972c98dfb"),redirectUri:"http://localhost:3000"},cache:{cacheLocation:"localStorage",storeAuthStateInCookie:!0}},a={scopes:["User.Read","email","profile","openid","Mail.Send","Mail.ReadWrite"]}},93303:function(e,s,t){"use strict";t.d(s,{O:function(){return n},i:function(){return i}});var r=t(13053);let a="https://migcpasmtbdojqphqyzc.supabase.co",l="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im1pZ2NwYXNtdGJkb2pxcGhxeXpjIiwicm9sZSI6ImFub24iLCJpYXQiOjE3Njk2OTk3MjYsImV4cCI6MjA4NTI3NTcyNn0.90w8O2oX76uPTuFp092jTCZoL95lJ7YnaOPMGcRP2fQ",n=(0,r.eI)(a,l);async function i(e,s){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"POST",r="".concat(a,"/functions/v1/").concat(e),n=await fetch(r,{method:t,headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(l)},body:s?JSON.stringify(s):void 0});if(!n.ok){let e=await n.text();throw Error("Edge Function error: ".concat(e))}return n.json()}}},function(e){e.O(0,[641,85,112,596,971,117,744],function(){return e(e.s=57454)}),_N_E=e.O()}]);